My Performance L12M Updates (Exact Specs)
Overview
Update the My Performance page metrics based on these specific requirements from the meeting.
Exact Changes Required
1. Buyer Side & Seller Side Section
Current: Shows one row with Buyer Side and Seller Side
Change: Add a SECOND row showing Last 12 Months data
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ  Buyer Side                   â”‚ ðŸ¢ Seller Side (Listings)       â”‚
â”‚                                 â”‚                                 â”‚
â”‚ 8 deals              YTD        â”‚ 2 deals              YTD        â”‚
â”‚ $2.1M volume                    â”‚ $800K volume                    â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 80% of deals    â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 20% of deals    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ  Buyer Side                   â”‚ ðŸ¢ Seller Side (Listings)       â”‚
â”‚                                 â”‚                                 â”‚
â”‚ 15 deals             L12M       â”‚ 5 deals              L12M       â”‚
â”‚ $5.2M volume                    â”‚ $1.8M volume                    â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 75% of deals    â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 25% of deals    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Layout: Two separate card rows:

Row 1: Buyer Side (YTD) | Seller Side (YTD) â€” labeled "Year to Date"
Row 2: Buyer Side (L12M) | Seller Side (L12M) â€” labeled "Last 12 Months"

2. Average Sale Price
Current: Shows YTD
Change: Show ONLY Last 12 Months (REMOVE Year to Date)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Average Sale Price              â”‚
â”‚ $377K                           â”‚
â”‚ Last 12 months                  â”‚  â† Add this label
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
3. Average Days to Close
Current: Shows YTD
Change: Show ONLY Last 12 Months (REMOVE Year to Date)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Avg Days to Close               â”‚
â”‚ 32 days                         â”‚
â”‚ Last 12 months                  â”‚  â† Add this label
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Summary Table
MetricYTDL12MNotesBuyer Sideâœ… Keepâœ… AddShow both in separate rowsSeller Sideâœ… Keepâœ… AddShow both in separate rowsAverage Sale PriceâŒ Removeâœ… Only thisL12M onlyAvg Days to CloseâŒ Removeâœ… Only thisL12M only
Backend Calculation Logic
typescript// Helper: Check if transaction closed within last 12 months
function isWithinLast12Months(closedAt: number | string): boolean {
  const closedDate = new Date(closedAt);
  const twelveMonthsAgo = new Date();
  twelveMonthsAgo.setMonth(twelveMonthsAgo.getMonth() - 12);
  return closedDate >= twelveMonthsAgo;
}

// Helper: Check if transaction closed this year (YTD)
function isCurrentYear(closedAt: number | string): boolean {
  return new Date(closedAt).getFullYear() === new Date().getFullYear();
}

// In performance metrics calculation
const closedTransactions = allTransactions.filter(tx => tx.closed === true);

// YTD transactions
const ytdTransactions = closedTransactions.filter(tx => isCurrentYear(tx.closedAt));

// L12M transactions
const l12mTransactions = closedTransactions.filter(tx => isWithinLast12Months(tx.closedAt));

// Buyer Side = listing === false
// Seller Side = listing === true

return {
  buyerSide: {
    ytd: {
      deals: ytdTransactions.filter(tx => !tx.listing).length,
      volume: ytdTransactions.filter(tx => !tx.listing).reduce((sum, tx) => sum + (tx.price?.amount || 0), 0)
    },
    l12m: {
      deals: l12mTransactions.filter(tx => !tx.listing).length,
      volume: l12mTransactions.filter(tx => !tx.listing).reduce((sum, tx) => sum + (tx.price?.amount || 0), 0)
    }
  },
  sellerSide: {
    ytd: {
      deals: ytdTransactions.filter(tx => tx.listing).length,
      volume: ytdTransactions.filter(tx => tx.listing).reduce((sum, tx) => sum + (tx.price?.amount || 0), 0)
    },
    l12m: {
      deals: l12mTransactions.filter(tx => tx.listing).length,
      volume: l12mTransactions.filter(tx => tx.listing).reduce((sum, tx) => sum + (tx.price?.amount || 0), 0)
    }
  },
  // L12M ONLY for these:
  avgSalesPrice: calculateAverage(l12mTransactions, 'price.amount'),
  avgDaysToClose: calculateAvgDaysToClose(l12mTransactions)
};
Files to Update

Backend: Performance calculation logic (add L12M filtering)
Frontend: my-performance.tsx - Add second row of cards, update labels

Success Criteria

 Buyer Side shows BOTH YTD and L12M in separate card rows
 Seller Side shows BOTH YTD and L12M in separate card rows
 Average Sale Price shows ONLY L12M (YTD removed)
 Average Days to Close shows ONLY L12M (YTD removed)
 All cards have clear labels ("Year to Date" vs "Last 12 Months")
 Data calculates correctly based on closedAt and listing fields