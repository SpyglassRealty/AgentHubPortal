"use strict";(()=>{var e={};e.id=688,e.ids=[688],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4907:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>P,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var r={};s.r(r),s.d(r,{GET:()=>u,dynamic:()=>c});var i=s(9303),a=s(8716),o=s(670),n=s(7070);let c="force-dynamic",l="https://api.repliers.io",p="sSOnHkc9wVilKtkd7N2qRs2R2WMH00";async function u(e){try{let{searchParams:t}=new URL(e.url),s=t.get("q"),r=t.get("city"),i=t.get("minPrice"),a=t.get("maxPrice"),o=t.get("beds"),c=t.get("baths"),u=t.get("status")||"Active",d=parseInt(t.get("limit")||"20"),g=parseInt(t.get("offset")||"0");if(!l||!p)return n.NextResponse.json({error:"API configuration missing"},{status:500});let h=new URLSearchParams({limit:d.toString(),offset:g.toString(),status:u});s&&h.set("q",s),r&&h.set("city",r),i&&h.set("minPrice",i),a&&h.set("maxPrice",a),o&&h.set("beds",o),c&&h.set("baths",c);let m=await fetch(`${l}/listings/search?${h}`,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!m.ok)throw Error(`API request failed: ${m.status}`);let P=await m.json(),f=P.listings?.map(e=>({mlsNumber:e.mlsNumber,address:e.address||"",city:e.city||"",state:e.state||"TX",zipCode:e.zipCode||"",price:e.price||e.listPrice||0,bedrooms:e.bedrooms||0,bathrooms:e.bathrooms||0,squareFeet:e.squareFeet||e.livingArea||0,primaryPhoto:e.primaryPhoto||e.photos?.[0]?.url||"",status:e.status||"Active",listDate:e.listDate||"",listingAgent:e.listingAgent||""}))||[];return n.NextResponse.json({listings:f,total:P.total||f.length,limit:d,offset:g})}catch(e){return console.error("Error searching listings:",e),n.NextResponse.json({error:"Failed to search listings"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/listings/search/route",pathname:"/api/listings/search",filename:"route",bundlePath:"app/api/listings/search/route"},resolvedPagePath:"/Users/ryanrodenbeck/clawd/projects/spyglass-studio/src/app/api/listings/search/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:m}=d,P="/api/listings/search/route";function f(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,972],()=>s(4907));module.exports=r})();