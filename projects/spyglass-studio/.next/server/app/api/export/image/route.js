"use strict";(()=>{var e={};e.id=28,e.ids=[28],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5358:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>c,patchFetch:()=>h,requestAsyncStorage:()=>x,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f});var i={};r.r(i),r.d(i,{GET:()=>g,POST:()=>d});var a=r(9303),o=r(8716),s=r(670),n=r(7070);let p=require("sharp");var l=r.n(p);async function d(e){try{let{canvas:t,format:r="png",width:i=1080,height:a=1080,quality:o=95,dpi:s=300}=await e.json();if(!t)return n.NextResponse.json({error:"Canvas data is required"},{status:400});let p=`
      <svg width="${i}" height="${a}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="100%" height="100%" fill="url(#bg)"/>
        <rect x="40" y="40" width="${i-80}" height="${a-80}" fill="white" rx="20" opacity="0.95"/>
        <text x="${i/2}" y="200" font-family="Arial, sans-serif" font-size="48" font-weight="bold" text-anchor="middle" fill="#1E40AF">
          Spyglass Studio
        </text>
        <text x="${i/2}" y="260" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" fill="#6B7280">
          Marketing Image Export
        </text>
        <text x="${i/2}" y="320" font-family="Arial, sans-serif" font-size="18" text-anchor="middle" fill="#6B7280">
          ${i}x${a} • ${r.toUpperCase()} • ${s} DPI
        </text>
        <text x="${i/2}" y="${a-100}" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#9CA3AF">
          Generated by Spyglass Studio API
        </text>
      </svg>
    `,d=await l()(Buffer.from(p)).png().toBuffer();("jpg"===r||"jpeg"===r)&&(d=await l()(d).jpeg({quality:o}).toBuffer());let g=`spyglass-studio-export.${r}`;return new n.NextResponse(d,{headers:{"Content-Type":"png"===r?"image/png":"image/jpeg","Content-Disposition":`attachment; filename="${g}"`,"Content-Length":d.length.toString()}})}catch(e){return console.error("Error exporting image:",e),n.NextResponse.json({error:"Failed to export image"},{status:500})}}async function g(){return n.NextResponse.json({endpoint:"Image Export API",description:"POST canvas data to generate marketing images",supported_formats:["png","jpg","jpeg"],max_dimensions:{width:4e3,height:4e3},example:{canvas:{},format:"png",width:1080,height:1080,quality:95,dpi:300}})}let u=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/export/image/route",pathname:"/api/export/image",filename:"route",bundlePath:"app/api/export/image/route"},resolvedPagePath:"/Users/ryanrodenbeck/clawd/projects/spyglass-studio/src/app/api/export/image/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:x,staticGenerationAsyncStorage:f,serverHooks:m}=u,c="/api/export/image/route";function h(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,972],()=>r(5358));module.exports=i})();